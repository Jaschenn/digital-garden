---
{"dg-publish":true,"dg-path":"2. 计算机综合/组成原理和操作系统｜干净版/4. 总线和 IO/4. 总线相关.md","permalink":"/2//4-io/4/"}
---

## 常见总线以及分类

| 分类                | 举例                            |
| ----------------- | ----------------------------- |
| 串行总线（速度快！）        | USB、PCIe、SATA（硬盘用）、雷雳、HDMI、DP |
| 并行总线（并行有干扰，适合近距离） | 内存总线、PCI、ISA                  |
区分总线、协议、接口三个词

|实际例子|插槽/接口|协议|总线|
|---|---|---|---|
|**SATA SSD**|SATA 接口|AHCI 协议|SATA 总线|
|**M.2 SATA SSD**|M.2 插槽|AHCI 协议|SATA 总线|
|**M.2 NVMe SSD**|M.2 插槽|NVMe 协议|PCIe 总线|
|**PCIe 显卡**|PCIe 插槽|PCIe 协议|PCIe 总线|
|**USB U盘**|USB-A 接口|USB 协议（2.0/3.0/3.1 等）|USB 总线|

需要注意的是，有些名词（比如 **SATA**、**PCIe**、**USB**）是 **混合性术语**，既可以是 **总线**，也代表了协议和接口；有些名词（比如 **M.2**） 仅仅是接口；有些名词（比如 **NVMe**）仅仅是协议。
## 总线构成
总线中一般包含控制线、地址线、数据线这三种角色的线束，有时候地址线和数据线会复用.
## 总线事务
总线事务是一个总线操作的基本单位，一个总线事务包括以下步骤：
在一个总线事务中，**主设备**（发起事务的设备）通过总线控制线对总线进行控制，并发出地址和数据，以及读写信号。**从设备**（数据被读取或写入的设备）则识别地址，并根据读写信号进行相应的数据交换。

**总线事务** 包含几个主要阶段：
1. **请求**（Request） ：主设备发出 **总线传输请求**。
2. **仲裁**（Arbitration） ：如果多个设备同时尝试使用总线，它们必须通过某种仲裁过程来 **决定哪个设备有权** 控制总线。这通常涉及一个优先级方案，以防止冲突和数据损坏。
3. **寻址**（Addressing） ：主设备将 **目标地址** 放在总线上，以指定事务的目的地，如特定的内存地址或 I/O 设备。
4. **传输**（Transfer） ：一旦地址被确认，数据传输就会发生。这可以是读操作，也可以是写操作。
5. **终止**（Termination） ：一旦数据成功传输，事务就会结束。终止阶段可能包括从设备发出的确认信号，或者主设备撤销其对总线的控制。

突发（猝发、Burst）总线传输事务是说在总线通信中，可以一次性的传输多个单位的数据（多个字节或者多个字），而无需每传一个单位就握手一次.
## 总线周期
**总线周期** 是指 **CPU** 通过 **总线** 与存储器或 **I/O** 接口进行一次数据传输所需的时间。  
==一个 **总线周期** 通常包含多个时钟周期==，这些时钟周期可以被分为四个阶段（四个时钟周期 T1,T2,T3,T4T1​,T2​,T3​,T4​ ）：
1. 申请分配阶段：主设备进行请求和仲裁。
2. 寻址阶段：主设备用地址信息来指明它想读/写的那个从设备是哪一个。
3. 传输阶段：主设备向从设备发出读命令或者写命令。
4. 结束阶段：主设备把地址信息、读写命令等从 **总线** 撤除，让出 **总线** 的使用权。

